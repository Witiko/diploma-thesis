\documentclass[
  digital, %% The `digital` option enables the default options for the
           %% digital version of a document. Replace with `printed`
           %% to enable the default options for the printed version
           %% of a document.
%%  color,   %% Uncomment these lines (by removing the %% at the
%%           %% beginning) to use color in the printed version of your
%%           %% document
  oneside, %% The `oneside` option enables one-sided typesetting,
           %% which is preferred if you are only going to submit a
           %% digital version of your thesis. Replace with `twoside`
           %% for double-sided typesetting if you are planning to
           %% also print your thesis. For double-sided typesetting,
           %% use at least 120 g/m² paper to prevent show-through.
  lof,     %% The `lof` option prints the List of Figures. Replace
           %% with `nolof` to hide the List of Figures.
  lot,     %% The `lot` option prints the List of Tables. Replace
           %% with `nolot` to hide the List of Tables.
]{fithesis4}
%% The following section sets up the locales used in the thesis.
\usepackage[resetfonts]{cmap} %% We need to load the T2A font encoding
\usepackage[T1,T2A]{fontenc}  %% to use the Cyrillic fonts with Russian texts.
\usepackage[
  main=english, %% By using `czech` or `slovak` as the main locale
                %% instead of `english`, you can typeset the thesis
                %% in either Czech or Slovak, respectively.
  english, german, french, russian, czech, slovak, portuguese, polish %% The additional keys allow
]{babel}        %% foreign texts to be typeset as follows:
%%
%% The following section sets up the metadata of the thesis.
\thesissetup{
    date        = \the\year/\the\month/\the\day,
    university  = mu,
    faculty     = fi,
    type        = d,
    author      = Vít Novotný,
    gender      = m,
    advisor     = {Doc. RNDr. Petr Sojka, Ph.\,D.},
    title       = {Interpretable Representations for Fast and
                   Accurate Retrieval of Mathematical Information},
    TeXtitle    = {Interpretable Representations \\ for Fast and
                   Accurate Retrieval \\ of Mathematical Information},
    bib         = main.bib,
    %% Remove the following line to use the JVS 2018 faculty logo.
    facultyLogo = fithesis-fi,
}

%% Author and term index
\usepackage{imakeidx}
\makeindex[name = author, title = {Author Index}, intoc]
\makeindex[name = subject, title = {Subject Index}, intoc]


\usepackage[babel]{csquotes} %% Context-sensitive quotation marks

\thesisload

%% Bibliography
\renewcommand\multinamedelim{\addcomma\addspace}
\renewcommand\finalnamedelim{\addspace and\addspace}
\makeatletter
\newbibmacro*{textcite}{%
  \iffieldequals{namehash}{\cbx@lasthash}
    {\setunit{\multicitedelim}}
    {\ifnameundef{labelname}
       {\printfield[citetitle]{labeltitle}}
       {\printnames{labelname}}%
     \setunit*{\printdelim{namelabeldelim}}%
     \ifciteseen  % Omit brackets from repeated citations
       {}
       {%
         \printtext{\bibopenbracket}\global\booltrue{cbx:parens}%
       }%
     \stepcounter{textcitecount}%
     \savefield{namehash}{\cbx@lasthash}}%
  \ifciteseen  % Omit citation number from repeated citations
    {}
    {%
      \ifnumequal{\value{citecount}}{1}
        {\usebibmacro{prenote}}
        {}%
      \usebibmacro{cite}%
      \setunit{%
        \ifbool{cbx:parens}
          {\bibclosebracket\global\boolfalse{cbx:parens}}
          {}%
        \textcitedelim}%
    }%
}
\makeatother

%% Typesetting
\emergencystretch=1em
\usepackage{enumitem}
\setlist[itemize]{
  leftmargin = \parindent,
  itemsep    = 0pt,
  parsep     = 0pt,
}

%% Table of contents
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}

\usepackage{grffile} %% Graphics
\usepackage{xurl} %% Breaking of URLs
\usepackage[nospace]{varioref} %% Intelligent references
\usepackage{stix} %% Additional math symbols
\usepackage{nicefrac} %% Nice fractions

%% Markup
\let\lll\relax
\usepackage[
  tightLists = false,
  theme=witiko/fithesis,
  theme=witiko/dot,
]{markdown}

\begin{document}

\markdownInput[slice=introduction]{main.md}
\markdownInput[slice=background]{main.md}
\markdownInput[slice=state-of-the-art]{main.md}
\markdownInput[slice=accuracy]{main.md}
\markdownInput[slice=speed]{main.md}
\markdownInput[slice=interpretability]{main.md}
\markdownInput[slice=conclusion]{main.md}

\chapter{Acronyms}
{\sloppy\printbibliography[heading=bibintoc]}
\printindex[subject]
\chapter{Glossary of Research Groups}
\printindex[author]

\appendix
\chapter{List of Author's Publications}

\end{document}
