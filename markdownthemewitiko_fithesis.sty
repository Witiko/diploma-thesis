\ProvidesPackage{markdownthemewitiko_fithesis}[2021/10/17]
\markdownSetup{
  citations,
  fencedCode,
  footnotes,
  headerAttributes,
  html,
  hybrid,
  inlineFootnotes,
  pipeTables,
  tableCaptions,
  underscores=false,
}

%% Tables with booktabs rules
\RequirePackage{booktabs}
\let\markdownLaTeXTopRule\toprule
\let\markdownLaTeXMidRule\midrule
\let\markdownLaTeXBottomRule\bottomrule


%% Margin notes
\RequirePackage{ragged2e,marginfix}
\setlength{\marginparwidth}{2.75cm}
\newcommand\marginparsetlists{%
  \setlist[itemize]{
    leftmargin = 0.45cm,
    itemsep    = 0pt,
    parsep     = 0pt,
    topsep     = 0pt,
    partopsep  = 0pt,
  }
  \setlist[enumerate]{
    leftmargin = 0.45cm,
    itemsep    = 0pt,
    parsep     = 0pt,
    topsep     = 0pt,
    partopsep  = 0pt,
  }
}
\markdownSetup{
  renderers = {
    inlineHtmlComment = {%
      \marginpar
        [%
          \marginparsetlists
          \color{black}\footnotesize\RaggedLeft#1%
        ]%
        {%
          \marginparsetlists
          \color{black}\footnotesize\RaggedRight#1%
        }%
    },
  },
}
\let\markdownRendererFootnote=\markdownRendererInlineHtmlComment

%% Non-teletype links
\usepackage[para]{footmisc}
\def\markdownRendererLink{%
  \begingroup
  \catcode`\#=12
  \def\next##1##2##3##4{%
    ##1\footnote{%
      \RaggedRight
      \href{##3}{{\sffamily\color{thesis@color@secondary}##2}}%
      \ifx\empty##4\empty\else, ##4\fi
    }%
    \endgroup
  }%
  \next
}

%% Code span in math mode equals \text
\markdownSetup{
  renderers = {
    codeSpan = {%
      \ifmmode
        \text{#1}%
      \else
        \text{#2}%
      \fi
    },
  }
}

%% Definitions of various Unicode characters
\RequirePackage{newunicodechar}
\newunicodechar{◌}{\dottedcircle}
\newunicodechar{←}{\noindent\ignorespaces}
\newunicodechar{→}{$\rightarrow$}
\newunicodechar{×}{$\times$}
